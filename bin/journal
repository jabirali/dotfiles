#!/usr/bin/env bash

# This shell script creates a journal entry in my personal wiki,
# based on a template that is expanded using the current date.

# Homebrew must be in $PATH.
PATH="/opt/homebrew/bin:$PATH"

# Location of personal wiki.
WIKI="$HOME/iCloud/Wiki"
PROJECT="$WIKI/wiki.sublime-project"
TEMPLATE="$WIKI/journal.template"

# Date info for journal entry.
export DATE="$(date +%Y-%m-%d)"
export DAY="$(date +%A)"

# Generate from template (if needed).
FILE="$WIKI/$DATE.md"
if [ ! -e "$FILE" ]; then
	envsubst < "$TEMPLATE" > "$WIKI/$DATE.md"
fi

# Open the journal page.
subl --project "$PROJECT" "$WIKI/$DATE.md"
