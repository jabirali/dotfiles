#!/bin/sh

# This script is run as `brew sync` from the command line, and simply
# ensures that all packages in `~/.config/Brewfile` are installed. 

if [[ "$(uname)" == "Darwin" ]]; then
	echo ":: Updating XCode..."
	xcode-select --install &>/dev/null && exit 1
fi

echo ":: Updating index..."
brew update

# Check if the `this` pointer is correctly set. This is a symlink `this.brew`
# that should point to the desired profile, e.g. `work.brew` or `home.brew`.
echo ":: Syncing apps..."
brew bundle --file=~/.config/Brewfile

# Finally, update any outdated packages.
echo ":: Updating apps..."
brew upgrade
