#!/bin/sh

# Common settings on Linux and macOS.
cd `dirname "$0"`
source setup-common

# Ensure that the Sublime Text config is synced on macOS.
ln -sf ~/.config/subl ~/Library/ApplicationSupport/Sublime\ Text\ 3/Packages/User

# This must be disabled for some apps using Vim keybindings to work.
defaults write -g ApplePressAndHoldEnabled -bool false

# Global: Custom keybinding for entering full screen. Not all apps have this...
defaults write -g NSUserKeyEquivalents -dict-add 'Full Screen' '@^f'
defaults write -g NSUserKeyEquivalents -dict-add 'Toggle Full Screen' '@^f'
defaults write -g NSUserKeyEquivalents -dict-add 'Enter Full Screen' '@^f'
defaults write -g NSUserKeyEquivalents -dict-add 'Exit Full Screen' '@^f'

# Dock and Launchpad: Fixed icon size and grid.
defaults write com.apple.dock tilesize -integer 40
defaults write com.apple.dock springboard-rows -int 3                                                                                                                                              (base)
defaults write com.apple.dock springboard-columns -int 6

# TextEdit: Use plain text as the default format.
defaults write com.apple.TextEdit RichText -int 0

# Safari: Enable developer mode.
defaults write com.apple.Safari IncludeInternalDebugMenu -bool true
defaults write com.apple.Safari IncludeDevelopMenu -bool true
defaults write com.apple.Safari WebKitDeveloperExtrasEnabledPreferenceKey -bool true
defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2DeveloperExtrasEnabled -bool true
defaults write -g WebKitDeveloperExtras -bool true

# Skim: Automatically reload.
defaults write -app Skim SKAutoReloadFileUpdate -boolean true

# Restart services affected by the above settings.
killall Dock
